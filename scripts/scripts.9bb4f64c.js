"use strict";angular.module("educaccionApp",["ngAnimate","ngRoute","ngSanitize","ngTouch","firebase","ngMaterial"]).config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode(!0),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("educaccionApp").controller("MainCtrl",["$scope","$firebaseArray","$http","$mdDialog",function(a,b,c,d){function e(a){var b=";base64,";if(-1===a.indexOf(b)){var c=a.split(","),d=c[0].split(":")[1],e=decodeURIComponent(c[1]);return new Blob([e],{type:d})}for(var f=a.split(b),g=f[0].split(":")[1],h=window.atob(f[1]),i=h.length,j=new Uint8Array(i),k=0;i>k;++k)j[k]=h.charCodeAt(k);return new Blob([j],{type:g})}a.loading=!0,a.filesOnly=!0,a.fields=[{field:"email",name:"Email"},{field:"direccion",name:"Dirección"},{field:"representativeNames",name:"Nombre de quien propone el proyecto"},{field:"phone",name:"Teléfono"},{field:"associationNames",name:"Nombre de los integrantes de Asociación de Padres de Familia o Consejo de Participación Social (o de ambos)"},{field:"schoolFeatures",name:"Características de la escuela"},{field:"studentsNumber",name:"Número de alumnos"},{field:"environmentDescription",name:"Descripción del entorno familiar y social de la población beneficiada"},{field:"schoolProblems",name:"Principales problemas en el entorno de la escuela"},{field:"problematic",name:"Problemática"},{field:"justification",name:"Justificación"},{field:"activityDescription",name:"Descripción de las actividades que se planean realizar"},{field:"namesList",name:"Lista de quiénes estarían involucrados"},{field:"date",name:"Fecha estimada"},{field:"decisionDescription",name:"Breve descripción de cómo se tomarán las decisiones"},{field:"evaluation",name:"Evaluación de avance"},{field:"interaction",name:"¿Cómo interactuarán con los maestros y directivos de la escuela?"},{field:"signatures",name:"Firmas"}],a.showSignature=function(a){d.show(d.alert().clickOutsideToClose(!0).title("Firmas").content('<img src="'+a+'">').ok("Ok"))},a.showFiles=function(a){if(a){a=a.forEach?a:Object.keys(a).map(function(b){return a[b]});var b='<div layout="row">',c='<div layout="column">';a.forEach(function(a){a.type&&0===a.type.indexOf("image")?b+='<img ng-src="'+a.raw+'">':c+='<a target="_blank" href="'+a.raw+'">'+a.name+"</a> <br/>"}),b+="</div>",c+="</div>";var e=d.alert().clickOutsideToClose(!0).title("Archivos").content('<div layout="column">'+b+c+"</div>").ok("Ok");d.show(e)}};var f=new Firebase("https://caminoalexito.firebaseio.com/").child("entries");a.stories=b(f),a.stories.$loaded(function(){a.loading=!1}),a.downloadAll=function(a){a.forEach(function(a){var b=e(a.raw);saveAs(b,a.name)})},a.filterFiles=function(b){return a.filesOnly?b.files&&b.files.length:!0}}]),angular.module("educaccionApp").run(["$templateCache",function(a){a.put("views/main.html",'<div layout="row" layout-align="center center" ng-if="loading"> <md-progress-circular md-mode="indeterminate"></md-progress-circular> </div> <md-content ng-show="!loading"> <md-checkbox ng-model="filesOnly" aria-label="Checkbox 1"> Con Archivos </md-checkbox> <md-list> <md-list-item class="md-3-line" ng-repeat="story in stories | filter: filterFiles" ng-click="story.show = !story.show"> <div class="md-list-item-text" layout="column" ng-if="story.cct"> <h3>{{ story.school }}</h3> <h4>{{ story.cct }}</h4> <div class="complete" layout="row" ng-show="story.show" layout-wrap ng-click="$event.stopPropagation();"> <p ng-if="field.field != \'signatures\'" flex="50" ng-repeat="field in fields">{{ field.name }}: <span class="black"> {{ story[field.field] }} </span> </p> <p ng-show="story.files" flex="50" ng-click="showFiles(story.files); $event.stopPropagation();">Archivos </p> <p ng-show="story.files" flex="50" ng-click="downloadAll(story.files); $event.stopPropagation();">Descargar todos los archivos </p> </div> </div> </md-list-item> </md-list> </md-content>')}]);